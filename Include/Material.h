#ifndef _MATERIAL_H
#define _MATERIAL_H

#include "SGUtil.h"
#include "Shader.h"
#include "ShaderManager.h"
#include <External/GL/glew.h>

namespace SGEngine
{
	class SGTexture;

	class SGMaterial
	{
		friend class SGMeshRenderer;

	public:
		SGMaterial(std::string material_name);
		~SGMaterial();

		/****************************************************************************************************************
		******************************	SHADER HANDLERS *****************************************************************
		*****************************************************************************************************************/

		void SetShader(SG_PTRS<Shader>const shader);
		std::string GetShaderName()  {
			return activeShader->shaderProgramName;
		}
							/* MODIFY UNIFORMS OF ACTIVE SHADER */
		template<typename UniformData>
		void SetUniform(const Shader_Uniform& uniform_name, const UniformData& data);


		/****************************************************************************************************************
		******************************	TEXTURE HANDLERS ********************************************************************
		*****************************************************************************************************************/

		void SetTexture(const char* name, const SG_UCHAR index);
		void RemoveTexture(const char* name);
		void RemoveTexture(const SG_UCHAR& index);
		const char* GetTextureName( const SG_UCHAR& index) {
			return _map_textures[index];
		}

		/****************************************************************************************************************
		******************************	UNIQUE ID GET ********************************************************************
		*****************************************************************************************************************/

		const long int& GetUUID() const {
			return uuid;
		}


	private:
		SGMaterial() {}

		/****************************************************************************************************************
		******************************	VERTEX BUFFER HANDLERS **********************************************************
		*****************************************************************************************************************/

		void BuildVAO(const SG_UINT& vao) const;
		void BindVAO(const SG_UINT& vao) const;
		void UnBindVAO() const;

		/****************************************************************************************************************
		******************************	TEXTURE HANDLERS ********************************************************************
		*****************************************************************************************************************/
		void BindTexture();

		/****************************************************************************************************************
		******************************	RENDER HANDLERS *****************************************************************
		*****************************************************************************************************************/

		void RenderBegin(const SG_UINT& vao);
		void RenderEnd();

		/****************************************************************************************************************
		******************************	DATA ****************************************************************************
		*****************************************************************************************************************/

		SG_PTRS<Shader> activeShader;
		long int uuid;
		std::string name;
		std::unordered_map<SG_UCHAR, const char*> _map_textures;
	};

#include "Material.inl"

};

#endif // !_MATERIAL_H